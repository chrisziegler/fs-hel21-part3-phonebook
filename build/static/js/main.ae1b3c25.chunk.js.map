{"version":3,"sources":["components/Filter.js","components/Persons.js","services/persons.js","components/PersonForm.js","App.js","index.js"],"names":["Filter","searchTerm","setSearchTerm","value","onChange","e","target","Persons","person","handleDelete","isShown","name","number","className","onClick","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonForm","persons","setPersons","setSuccessMessage","setErrorMessage","useState","newName","setNewName","newNumber","setNewNumber","handleSubmit","a","preventDefault","nameObject","some","personService","returnedPerson","concat","setTimeout","window","confirm","find","updatedPerson","map","type","Notification","successMessage","errorMessage","App","filter","setFilter","useEffect","initialNumbers","results","toLowerCase","includes","ReactDOM","render","document","getElementById"],"mappings":"qLAQeA,EARA,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,WAAYC,EAAoB,EAApBA,cAK5B,OAAO,uBAAOC,MAAOF,EAAYG,SAJZ,SAAAC,GACnBH,EAAcG,EAAEC,OAAOH,WCYZI,EAdC,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,OAAQC,EAA4B,EAA5BA,aAA4B,EAAdC,QACvC,OACE,+BACGF,EAAOG,KADV,IACiBH,EAAOI,OACtB,wBACEC,UAAU,SACVC,QAAS,kBAAML,EAAaD,IAF9B,mB,wCCFAO,EAAU,eAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB5B,EAfA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa5B,EAVA,SAACC,EAAWE,GAEzB,OADgBP,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ5B,EALA,SAAAG,GAEb,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCoE5BM,EAtFI,SAAC,GAKb,IAJLC,EAII,EAJJA,QACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,kBACAC,EACI,EADJA,gBAEA,EAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAkCF,mBAAS,IAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KASMC,EAAY,uCAAG,WAAM/B,GAAN,uBAAAgC,EAAA,yDACnBhC,EAAEiC,iBACIC,EAAa,CAAE5B,KAAMqB,EAASpB,OAAQsB,GAFzB,SAKZP,EAAQa,MAAK,SAAAhC,GAAM,OAAIA,EAAOG,OAASqB,KAL3B,iCAMYS,EACzBF,GAPa,OAMXG,EANW,OASfd,EAAWD,EAAQgB,OAAOD,IAC1BT,EAAW,IACXE,EAAa,IAEbN,EAAkB,SAAD,OAAUG,IAC3BY,YAAW,WACTf,EAAkB,QACjB,KAhBY,+BAkBfgB,OAAOC,QAAP,UACKd,EADL,sEAlBe,EAqBAL,EAAQoB,MACrB,SAAAvC,GAAM,OAAIA,EAAOG,OAAS4B,EAAW5B,QAD/BY,EArBO,EAqBPA,GArBO,UAyBWkB,EACxBF,EACAhB,GA3Ba,QAyBXyB,EAzBW,OA6BfpB,EACED,EAAQsB,KAAI,SAAAzC,GAAM,OAChBA,EAAOe,KAAOA,EAAKf,EAASwC,MAGhCf,EAAW,IACXE,EAAa,IACbN,EAAkB,SAAD,OAAUG,IAC3BY,YAAW,WACTf,EAAkB,QACjB,KAvCY,0DA0CjBC,EAAgB,kBAAD,OACKE,EADL,0CAGfY,YAAW,WACTd,EAAgB,QACf,KA/Cc,0DAAH,sDAmDlB,OACE,iCACE,wCAEE,uBAAO3B,MAAO6B,EAAS5B,SA9DL,SAAAC,GACtB4B,EAAW5B,EAAEC,OAAOH,aA+DlB,0CAEE,uBAAOA,MAAO+B,EAAW9B,SA/DL,SAAAC,GACxB8B,EAAa9B,EAAEC,OAAOH,aAgEpB,8BACE,wBAAQ+C,KAAK,SAASpC,QAASsB,EAA/B,uBC1EFe,EAAe,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,eAAgBC,EAAmB,EAAnBA,aACtC,OAAuB,OAAnBD,GAA4C,OAAjBC,EACtB,KACEA,EACF,qBAAKxC,UAAU,QAAf,SAAwBwC,IAE1B,qBAAKxC,UAAU,iBAAf,SAAiCuC,KAgE3BE,EA7DH,WACV,MAA8BvB,mBAAS,IAAvC,mBAAOJ,EAAP,KAAgBC,EAAhB,KACA,EAAoCG,mBAAS,IAA7C,mBAAO9B,EAAP,KAAmBC,EAAnB,KACA,EAA4B6B,mBAAS,IAArC,mBAAOwB,EAAP,KAAeC,EAAf,KACA,EAA4CzB,mBAAS,MAArD,mBAAOqB,EAAP,KAAuBvB,EAAvB,KACA,EAAwCE,mBAAS,MAAjD,mBAAOsB,EAAP,KAAqBvB,EAArB,KAEA2B,qBAAU,WACRhB,IAAuBvB,MAAK,SAAAwC,GAC1B9B,EAAW8B,QAEZ,IAEHD,qBAAU,WACR,IAAME,EAAUhC,EAAQ4B,QAAO,SAAA/C,GAAM,OACnCA,EAAOG,KACJiD,cACAC,SAAS5D,EAAW2D,kBAEzBJ,EAAUG,KACT,CAAC1D,EAAY0B,IAEhB,IAAMlB,EAAe,SAAC,GAAkB,IAAhBc,EAAe,EAAfA,GAAIZ,EAAW,EAAXA,KAC1B8B,EACUlB,GACPL,KAAK2B,OAAOC,QAAP,iBAAyBnC,EAAzB,OACRiB,EAAWD,EAAQ4B,QAAO,SAAA/C,GAAM,OAAIA,EAAOe,KAAOA,OAGpD,OACE,gCACE,2CACA,cAAC,EAAD,CACE6B,eAAgBA,EAChBC,aAAcA,IAEhB,cAAC,EAAD,CACEnD,cAAeA,EACfD,WAAYA,IAEd,2CACA,cAAC,EAAD,CACE0B,QAASA,EACTC,WAAYA,EACZC,kBAAmBA,EACnBC,gBAAiBA,IAEnB,yCACA,6BACGyB,EAAON,KAAI,SAAAzC,GAAM,OAChB,cAAC,EAAD,CAEEA,OAAQA,EACRC,aAAcA,GAFTD,EAAOG,eC9DxBmD,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.ae1b3c25.chunk.js","sourcesContent":["const Filter = ({ searchTerm, setSearchTerm }) => {\r\n  const handleSearch = e => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  return <input value={searchTerm} onChange={handleSearch} />;\r\n};\r\n\r\nexport default Filter;\r\n","const Persons = ({ person, handleDelete, isShown }) => {\r\n  return (\r\n    <li>\r\n      {person.name} {person.number}\r\n      <button\r\n        className=\"delete\"\r\n        onClick={() => handleDelete(person)}\r\n      >\r\n        X\r\n      </button>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (newObject, id) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default { getAll, create, update, remove }\r\n","import { useState } from 'react';\r\nimport personService from '../services/persons';\r\n\r\nconst PersonForm = ({\r\n  persons,\r\n  setPersons,\r\n  setSuccessMessage,\r\n  setErrorMessage,\r\n}) => {\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n\r\n  const handleNameInput = e => {\r\n    setNewName(e.target.value);\r\n  };\r\n  const handleNumberInput = e => {\r\n    setNewNumber(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const nameObject = { name: newName, number: newNumber };\r\n    try {\r\n      // Check if name is already in use\r\n      if (!persons.some(person => person.name === newName)) {\r\n        let returnedPerson = await personService.create(\r\n          nameObject,\r\n        );\r\n        setPersons(persons.concat(returnedPerson));\r\n        setNewName('');\r\n        setNewNumber('');\r\n\r\n        setSuccessMessage(`Added ${newName}`);\r\n        setTimeout(() => {\r\n          setSuccessMessage(null);\r\n        }, 5000);\r\n      } else {\r\n        window.confirm(\r\n          `${newName} is already added to phonebook, replace old numer with a new one?`,\r\n        );\r\n        const { id } = persons.find(\r\n          person => person.name === nameObject.name,\r\n        );\r\n\r\n        let updatedPerson = await personService.update(\r\n          nameObject,\r\n          id,\r\n        );\r\n        setPersons(\r\n          persons.map(person =>\r\n            person.id !== id ? person : updatedPerson,\r\n          ),\r\n        );\r\n        setNewName('');\r\n        setNewNumber('');\r\n        setSuccessMessage(`Added ${newName}`);\r\n        setTimeout(() => {\r\n          setSuccessMessage(null);\r\n        }, 5000);\r\n      }\r\n    } catch (err) {\r\n      setErrorMessage(\r\n        `Information of ${newName} has already been deleted from server`,\r\n      );\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <div>\r\n        name:\r\n        <input value={newName} onChange={handleNameInput} />\r\n      </div>\r\n      <div>\r\n        number:\r\n        <input value={newNumber} onChange={handleNumberInput} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" onClick={handleSubmit}>\r\n          add\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import { useState, useEffect } from 'react';\n\nimport Filter from './components/Filter';\nimport Persons from './components/Persons';\nimport PersonForm from './components/PersonForm';\nimport personService from './services/persons';\n\nconst Notification = ({ successMessage, errorMessage }) => {\n  if (successMessage === null && errorMessage === null) {\n    return null;\n  } else if (errorMessage) {\n    return <div className=\"error\">{errorMessage}</div>;\n  }\n  return <div className=\"successMessage\">{successMessage}</div>;\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filter, setFilter] = useState([]);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then(initialNumbers => {\n      setPersons(initialNumbers);\n    });\n  }, []);\n\n  useEffect(() => {\n    const results = persons.filter(person =>\n      person.name\n        .toLowerCase()\n        .includes(searchTerm.toLowerCase()),\n    );\n    setFilter(results);\n  }, [searchTerm, persons]);\n\n  const handleDelete = ({ id, name }) => {\n    personService\n      .remove(id)\n      .then(window.confirm(`Delete ${name}?`));\n    setPersons(persons.filter(person => person.id !== id));\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <Filter\n        setSearchTerm={setSearchTerm}\n        searchTerm={searchTerm}\n      />\n      <h2>add a new</h2>\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        setSuccessMessage={setSuccessMessage}\n        setErrorMessage={setErrorMessage}\n      />\n      <h2>Numbers</h2>\n      <ul>\n        {filter.map(person => (\n          <Persons\n            key={person.name}\n            person={person}\n            handleDelete={handleDelete}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}