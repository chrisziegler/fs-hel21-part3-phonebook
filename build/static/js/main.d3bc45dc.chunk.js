(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(16),s=t.n(r),u=(t(21),t(3)),o=t(0),a=function(e){var n=e.searchTerm,t=e.setSearchTerm;return Object(o.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})},i=function(e){var n=e.person,t=e.handleDelete;return Object(o.jsxs)("li",{children:[n.name," ",n.number,Object(o.jsx)("button",{className:"delete",onClick:function(){return t(n)},children:"X"})]})},l=t(4),d=t.n(l),j="/api/persons",f=function(){return d.a.get(j).then((function(e){return e.data}))},b=function(e){return d.a.post(j,e).then((function(e){return e.data}))},h=function(e,n){return d.a.put("".concat(j,"/").concat(n),e).then((function(e){return e.data}))},O=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},m=function(e){var n=e.persons,t=e.setPersons,r=e.setSuccessMessage,s=e.setErrorMessage,a=Object(c.useState)(""),i=Object(u.a)(a,2),l=i[0],d=i[1],j=Object(c.useState)(""),O=Object(u.a)(j,2),m=O[0],v=O[1];return Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number:",Object(o.jsx)("input",{value:m,onChange:function(e){v(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var c={name:l,number:m};if(n.some((function(e){return e.name===l}))){if(!window.confirm("".concat(l," is already added to phonebook, replace old number with a new one?")))return d(""),void v("");var u=n.find((function(e){return e.name===l})).id;h(c,u).then((function(e){t(n.map((function(n){return n.id!==u?n:e}))).then((function(){d(""),v(""),r("Updated the phone number for ".concat(l)),setTimeout((function(){r(null)}),5e3)}))})).catch((function(e){s("Person was already removed from server"),d(""),v(""),setTimeout((function(){s(null),f().then((function(e){t(e)}))}),5e3)}))}else b(c).then((function(e){t(n.concat(e)),r("Added ".concat(e.name)),setTimeout((function(){r(null)}),5e3),d(""),v("")})).catch((function(e){s(e.response.data.error),setTimeout((function(){s(null)}),5e3)}))},children:"add"})})]})},v=function(e){var n=e.successMessage,t=e.errorMessage;return null===n&&null===t?null:t?Object(o.jsx)("div",{className:"error",children:t}):Object(o.jsx)("div",{className:"success",children:n})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],s=Object(c.useState)(""),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(c.useState)([]),h=Object(u.a)(b,2),p=h[0],x=h[1],g=Object(c.useState)(null),w=Object(u.a)(g,2),S=w[0],k=w[1],M=Object(c.useState)(null),T=Object(u.a)(M,2),C=T[0],E=T[1];Object(c.useEffect)((function(){f().then((function(e){r(e)}))}),[]),Object(c.useEffect)((function(){var e=t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(d.toLowerCase())}));e&&x(e)}),[d,t]);var y=function(e){var n=e.id,c=e.name;window.confirm("Delete ".concat(c,"?"))&&O(n).then(r(t.filter((function(e){return e.id!==n}))))};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)(v,{successMessage:S,errorMessage:C}),Object(o.jsx)(a,{setSearchTerm:j,searchTerm:d}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(m,{persons:t,setPersons:r,setSuccessMessage:k,setErrorMessage:E}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("ul",{children:p.map((function(e){return Object(o.jsx)(i,{person:e,handleDelete:y},e.name)}))})]})};s.a.render(Object(o.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.d3bc45dc.chunk.js.map