(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(17),a=t.n(c),s=(t(22),t(3)),u=t(0),o=function(e){var n=e.searchTerm,t=e.setSearchTerm;return Object(u.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})},i=function(e){var n=e.person,t=e.handleDelete;return Object(u.jsxs)("li",{children:[n.name," ",n.number,Object(u.jsx)("button",{className:"delete",onClick:function(){return t(n)},children:"X"})]})},l=t(5),b=t(4),j=t.n(b),m="/api/persons",d=function(){return j.a.get(m).then((function(e){return e.data}))},f=function(e){return j.a.post(m,e).then((function(e){return e.data}))},h=function(e,n){return j.a.put("".concat(m,"/").concat(n),e).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.persons,t=e.setPersons,c=e.setSuccessMessage,a=e.setErrorMessage,o=Object(r.useState)({name:"",number:""}),i=Object(s.a)(o,2),b=i[0],j=i[1];return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:b.name,onChange:function(e){j(Object(l.a)(Object(l.a)({},b),{},{name:e.target.value}))}})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:b.number,onChange:function(e){j(Object(l.a)(Object(l.a)({},b),{},{number:e.target.value}))}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var r={name:b.name,number:b.number},s=n.some((function(e){return e.name.toLowerCase()===b.name.toLowerCase()}));if(s){if(s){if(!1===window.confirm("'".concat(b.name,"' already exists, replace phone number?")))return void j({name:"",number:""});var u=n.find((function(e){return e.name.toLowerCase()===b.name.toLowerCase()})).id;h(r,u).then((function(e){if(null===e)throw new Error("'".concat(b.name,"' was already removed from server"));t(n.map((function(n){return n.id!==u?n:e}))),c("Updated the number"),j({name:"",number:""}),setTimeout((function(){c(null)}),5e3)})).catch((function(e){a(e.message),j({name:"",number:""}),setTimeout((function(){a(null),d().then((function(e){t(e)}))}),5e3)}))}}else f(r).then((function(e){t(n.concat(e)),c("Added ".concat(e.name)),setTimeout((function(){c(null)}),5e3),j({name:"",number:""})})).catch((function(e){a(e.response.data.error),setTimeout((function(){a(null)}),5e3)}))},children:"add"})})]})},p=function(e){var n=e.successMessage,t=e.errorMessage;return null===n&&null===t?null:t?Object(u.jsx)("div",{className:"error",children:t}):Object(u.jsx)("div",{className:"success",children:n})},x=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),l=Object(s.a)(a,2),b=l[0],j=l[1],m=Object(r.useState)([]),f=Object(s.a)(m,2),h=f[0],x=f[1],g=Object(r.useState)(null),w=Object(s.a)(g,2),C=w[0],S=w[1],M=Object(r.useState)(null),T=Object(s.a)(M,2),k=T[0],E=T[1];Object(r.useEffect)((function(){d().then((function(e){c(e)}))}),[]),Object(r.useEffect)((function(){var e=t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(b.toLowerCase())}));e&&x(e)}),[b,t]);var L=function(e){var n=e.id,r=e.name;window.confirm("Delete ".concat(r,"?"))&&O(n).then(c(t.filter((function(e){return e.id!==n}))))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(p,{successMessage:C,errorMessage:k}),Object(u.jsx)(o,{setSearchTerm:j,searchTerm:b}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(v,{persons:t,setPersons:c,setSuccessMessage:S,setErrorMessage:E}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:h.map((function(e){return Object(u.jsx)(i,{person:e,handleDelete:L},e.name)}))})]})};a.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.af275759.chunk.js.map