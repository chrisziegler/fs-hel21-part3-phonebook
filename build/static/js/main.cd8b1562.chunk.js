(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(17),a=t.n(r),s=(t(23),t(3)),u=t(0),o=function(e){var n=e.searchTerm,t=e.setSearchTerm;return Object(u.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})},i=function(e){var n=e.person,t=e.handleDelete;return Object(u.jsxs)("li",{children:[n.name," ",n.number,Object(u.jsx)("button",{className:"delete",onClick:function(){return t(n)},children:"X"})]})},l=t(8),j=t.n(l),b=t(18),d=t(4),f=t.n(d),h="/api/persons",O=function(){return f.a.get(h).then((function(e){return e.data}))},m=function(e){return f.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return f.a.put("".concat(h,"/").concat(n),e).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e){var n=e.persons,t=e.setPersons,r=e.setSuccessMessage,a=e.setErrorMessage,o=Object(c.useState)(""),i=Object(s.a)(o,2),l=i[0],d=i[1],f=Object(c.useState)(""),h=Object(s.a)(f,2),O=h[0],v=h[1],x=function(){var e=Object(b.a)(j.a.mark((function e(c){var s,u,o,i,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),s={name:l,number:O},e.prev=2,n.some((function(e){return e.name===l}))){e.next=14;break}return e.next=6,m(s);case 6:u=e.sent,t(n.concat(u)),d(""),v(""),r("Added ".concat(l)),setTimeout((function(){r(null)}),5e3),e.next=24;break;case 14:return window.confirm("".concat(l," is already added to phonebook, replace old number with a new one?")),o=n.find((function(e){return e.name===s.name})),i=o.id,e.next=18,p(s,i);case 18:b=e.sent,t(n.map((function(e){return e.id!==i?e:b}))),d(""),v(""),r("Updated the phone number for ".concat(l)),setTimeout((function(){r(null)}),5e3);case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(2),a("Information of ".concat(l," has already been deleted from server")),setTimeout((function(){a(null)}),5e3);case 30:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(n){return e.apply(this,arguments)}}();return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:O,onChange:function(e){v(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:x,children:"add"})})]})},g=function(e){var n=e.successMessage,t=e.errorMessage;return null===n&&null===t?null:t?Object(u.jsx)("div",{className:"error",children:t}):Object(u.jsx)("div",{className:"success",children:n})},w=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),l=Object(s.a)(a,2),j=l[0],b=l[1],d=Object(c.useState)([]),f=Object(s.a)(d,2),h=f[0],m=f[1],p=Object(c.useState)(null),w=Object(s.a)(p,2),k=w[0],S=w[1],M=Object(c.useState)(null),C=Object(s.a)(M,2),T=C[0],y=C[1];Object(c.useEffect)((function(){O().then((function(e){r(e)}))}),[]),Object(c.useEffect)((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));m(e)}),[j,t]);var E=function(e){var n=e.id,c=e.name;v(n).then(window.confirm("Delete ".concat(c,"?"))),r(t.filter((function(e){return e.id!==n})))};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(g,{successMessage:k,errorMessage:T}),Object(u.jsx)(o,{setSearchTerm:b,searchTerm:j}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(x,{persons:t,setPersons:r,setSuccessMessage:S,setErrorMessage:y}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:h.map((function(e){return Object(u.jsx)(i,{person:e,handleDelete:E},e.name)}))})]})};a.a.render(Object(u.jsx)(w,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.cd8b1562.chunk.js.map