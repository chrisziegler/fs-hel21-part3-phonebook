{"version":3,"sources":["components/Filter.js","components/Persons.js","services/persons.js","components/PersonForm.js","App.js","index.js"],"names":["Filter","searchTerm","setSearchTerm","value","onChange","e","target","Persons","person","handleDelete","name","number","className","onClick","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonForm","persons","setPersons","setSuccessMessage","setErrorMessage","useState","newName","setNewName","newNumber","setNewNumber","type","preventDefault","nameObject","some","window","confirm","find","personService","updatedPerson","map","setTimeout","catch","error","initialNumbers","returnedPerson","concat","Notification","successMessage","errorMessage","App","filter","setFilter","useEffect","results","toLowerCase","includes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d3bc45dc.chunk.js","sourcesContent":["const Filter = ({ searchTerm, setSearchTerm }) => {\r\n  const handleSearch = e => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  return <input value={searchTerm} onChange={handleSearch} />;\r\n};\r\n\r\nexport default Filter;\r\n","const Persons = ({ person, handleDelete }) => {\r\n  return (\r\n    <li>\r\n      {person.name} {person.number}\r\n      <button className=\"delete\" onClick={() => handleDelete(person)}>\r\n        X\r\n      </button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Persons\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (newObject, id) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default { getAll, create, update, remove }\r\n","import { useState } from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst PersonForm = ({\r\n  persons,\r\n  setPersons,\r\n  setSuccessMessage,\r\n  setErrorMessage,\r\n}) => {\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n\r\n  // const nullTimer = () => {\r\n\r\n  // }\r\n\r\n  const handleNameInput = e => {\r\n    setNewName(e.target.value)\r\n  }\r\n  const handleNumberInput = e => {\r\n    setNewNumber(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    const nameObject = { name: newName, number: newNumber }\r\n    // if name is unique ...\r\n    if (!persons.some(person => person.name === newName)) {\r\n      personService\r\n        .create(nameObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setSuccessMessage(`Added ${returnedPerson.name}`)\r\n          setTimeout(() => {\r\n            setSuccessMessage(null)\r\n          }, 5000)\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n    } else {\r\n      const confirmed = window.confirm(\r\n        `${newName} is already added to phonebook, replace old number with a new one?`,\r\n      )\r\n\r\n      if (confirmed) {\r\n        const { id } = persons.find(person => person.name === newName)\r\n        personService\r\n          .update(nameObject, id)\r\n          .then(updatedPerson => {\r\n            setPersons(\r\n              persons.map(person =>\r\n                person.id !== id ? person : updatedPerson,\r\n              ),\r\n            ).then(() => {\r\n              setNewName('')\r\n              setNewNumber('')\r\n              setSuccessMessage(`Updated the phone number for ${newName}`)\r\n              setTimeout(() => {\r\n                setSuccessMessage(null)\r\n              }, 5000)\r\n            })\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(`Person was already removed from server`)\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n              personService.getAll().then(initialNumbers => {\r\n                setPersons(initialNumbers)\r\n              })\r\n            }, 5000)\r\n          })\r\n      } else {\r\n        setNewName('')\r\n        setNewNumber('')\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form>\r\n      <div>\r\n        name:\r\n        <input value={newName} onChange={handleNameInput} />\r\n      </div>\r\n      <div>\r\n        number:\r\n        <input value={newNumber} onChange={handleNumberInput} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" onClick={handleSubmit}>\r\n          add\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import { useState, useEffect } from 'react'\n\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\n\nconst Notification = ({ successMessage, errorMessage }) => {\n  if (successMessage === null && errorMessage === null) {\n    return null\n  } else if (errorMessage) {\n    return <div className=\"error\">{errorMessage}</div>\n  }\n  return <div className=\"success\">{successMessage}</div>\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [searchTerm, setSearchTerm] = useState('')\n  const [filter, setFilter] = useState([])\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService.getAll().then(initialNumbers => {\n      setPersons(initialNumbers)\n    })\n  }, [])\n\n  useEffect(() => {\n    const results = persons.filter(person =>\n      person?.name?.toLowerCase().includes(searchTerm.toLowerCase()),\n    )\n    if (results) {\n      setFilter(results)\n    }\n  }, [searchTerm, persons])\n\n  const handleDelete = ({ id, name }) => {\n    let confirmed = window.confirm(`Delete ${name}?`)\n    if (confirmed) {\n      personService\n        .remove(id)\n        .then(setPersons(persons.filter(person => person.id !== id)))\n    } else {\n      return\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <Filter setSearchTerm={setSearchTerm} searchTerm={searchTerm} />\n      <h2>add a new</h2>\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        setSuccessMessage={setSuccessMessage}\n        setErrorMessage={setErrorMessage}\n      />\n      <h2>Numbers</h2>\n      <ul>\n        {filter.map(person => (\n          <Persons\n            key={person.name}\n            person={person}\n            handleDelete={handleDelete}\n          />\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}